# OpenMetadata Environment Configuration
# Enhanced settings for MCP server stability

# Database Configuration (Enhanced for connection pooling)
DB_DRIVER_CLASS=com.mysql.cj.jdbc.Driver
DB_SCHEME=mysql
DB_PARAMS=allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=UTC&autoReconnect=true&maxReconnects=10&initialTimeout=1&useConnectionPooling=true&cachePrepStmts=true&useServerPrepStmts=true&prepStmtCacheSize=250&prepStmtCacheSqlLimit=2048&useLocalSessionState=true&useLocalTransactionState=true&rewriteBatchedStatements=true&cacheResultSetMetadata=true&cacheServerConfiguration=true&elideSetAutoCommits=true&maintainTimeStats=false&socketTimeout=300000&connectTimeout=60000
DB_USER=openmetadata_user
DB_USER_PASSWORD=openmetadata_password
DB_HOST=mysql
DB_PORT=3306
OM_DATABASE=openmetadata_db

# MySQL Standard Environment Variables
MYSQL_ROOT_PASSWORD=openmetadata_password
MYSQL_DATABASE=openmetadata_db
MYSQL_USER=openmetadata_user
MYSQL_PASSWORD=openmetadata_password

# ElasticSearch Configuration (Enhanced timeouts)
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_SCHEME=http
ELASTICSEARCH_CONNECTION_TIMEOUT_SECS=30
ELASTICSEARCH_SOCKET_TIMEOUT_SECS=300
ELASTICSEARCH_KEEP_ALIVE_TIMEOUT_SECS=1200
ELASTICSEARCH_BATCH_SIZE=100
ELASTICSEARCH_PAYLOAD_BYTES_SIZE=10485760

# Server Configuration
OPENMETADATA_CLUSTER_NAME=openmetadata
SERVER_PORT=8585
SERVER_ADMIN_PORT=8586
LOG_LEVEL=INFO

# Memory Configuration (Enhanced for better performance)
OPENMETADATA_HEAP_OPTS="-Xmx2G -Xms1G -XX:+UseG1GC -XX:MaxGCPauseMillis=200"

# Pipeline Service Configuration
PIPELINE_SERVICE_CLIENT_ENDPOINT=http://ingestion:8080
PIPELINE_SERVICE_CLIENT_HEALTH_CHECK_INTERVAL=300
SERVER_HOST_API_URL=http://openmetadata-server:8585/api
PIPELINE_SERVICE_CLIENT_ENABLED=true

# Authentication
AUTHENTICATION_PROVIDER=basic
AUTHENTICATION_ENABLE_SELF_SIGNUP=true

# JWT Configuration
JWT_ISSUER=open-metadata.org
JWT_KEY_ID=Gb389a-9f76-gdjs-a92j-0242bk94356

# Airflow Database Configuration
AIRFLOW_DB_HOST=mysql
AIRFLOW_DB_PORT=3306
AIRFLOW_DB=airflow_db
AIRFLOW_DB_SCHEME=mysql+mysqldb
AIRFLOW_DB_USER=airflow_user
AIRFLOW_DB_PASSWORD=airflow_pass

# =============================================================================
# CONNECTOR CREDENTIALS & SECRETS
# =============================================================================

# OpenMetadata JWT Token for Ingestion Bot
# This token is used by connectors to authenticate with OpenMetadata API
OPENMETADATA_JWT_TOKEN=YOUR_OPENMETADATA_JWT_TOKEN_HERE
# OpenMetadata Server Configuration
OPENMETADATA_SERVER_HOST_PORT=http://localhost:8585/api

# =============================================================================
# SNOWFLAKE CONFIGURATION
# =============================================================================

# Snowflake Connection Details
SNOWFLAKE_USERNAME=YOUR_SNOWFLAKE_USERNAME_HERE
SNOWFLAKE_PASSWORD=YOUR_SNOWFLAKE_PASSWORD_HERE
SNOWFLAKE_WAREHOUSE=YOUR_SNOWFLAKE_WAREHOUSE_HERE
SNOWFLAKE_ACCOUNT=YOUR_SNOWFLAKE_ACCOUNT_HERE
SNOWFLAKE_DATABASE=YOUR_SNOWFLAKE_DATABASE_HERE
SNOWFLAKE_ROLE=YOUR_SNOWFLAKE_ROLE_HERE

# Snowflake Connection Options
SNOWFLAKE_SCHEMA=PUBLIC
SNOWFLAKE_HOST_PORT=YOUR_SNOWFLAKE_HOST_HERE
SNOWFLAKE_INCLUDE_TRANSIENT_TABLES=false
SNOWFLAKE_INCLUDE_STREAMS=false
SNOWFLAKE_CLIENT_SESSION_KEEP_ALIVE=false

# Snowflake Private Key (Base64 encoded for single line)
SNOWFLAKE_PRIVATE_KEY="YOUR_SNOWFLAKE_PRIVATE_KEY_HERE"
# Snowflake Private Key Passphrase
SNOWFLAKE_PRIVATE_KEY_PASSPHRASE=YOUR_SNOWFLAKE_PASSPHRASE_HERE

# =============================================================================
# FIVETRAN CONFIGURATION
# =============================================================================

# Fivetran API Credentials
FIVETRAN_API_KEY=YOUR_FIVETRAN_API_KEY_HERE
FIVETRAN_API_SECRET=YOUR_FIVETRAN_API_SECRET_HERE
FIVETRAN_HOST_PORT=https://api.fivetran.com
FIVETRAN_LIMIT=1000

# Fivetran Service Configuration
FIVETRAN_SERVICE_NAME=local_fivetran
